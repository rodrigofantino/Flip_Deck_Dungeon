FLIP DECK DUNGEON
GAME DESIGN DOCUMENT (GDD)

========================
1. VISION GENERAL
========================
Flip Deck Dungeon es un roguelike de cartas con combates por turnos donde las cartas
son entidades vivas con HP, dano, nivel e iniciativa.

Plataforma: PC (Steam)
Motor: Godot 4.5
Duracion de runs: corta / media
Enfoque: decisiones claras, progresion persistente y alta rejugabilidad.

========================
2. PILARES DE DISENO
========================
- Cartas como entidades vivas
- Una sola fuente de verdad
- Runs cortas pero profundas
- Progresion clara (run vs meta)
- Riesgo vs recompensa explicito

========================
3. CORE FANTASY
========================
El jugador encarna a un heroe representado por una carta.
Los enemigos tambien son cartas que se enfrentan en combates rapidos y letales.

========================
4. LOOP PRINCIPAL (ACTUAL)
========================
- Inicio de run
- Seleccion de quest y dificultad
- Eleccion de heroe
- Eleccion de 1+ tipos de enemigo
- Construccion de mazos de run
- Oleadas (cantidad variable por quest)
  - Robo de enemigos desde 1 a 5 mazos activos
  - Combate, drops y limpieza de estado
- Miniboss cada 5 oleadas
- Boss final al terminar todas las oleadas y limpiar enemigos
- Crossroads al limpiar todos los mazos
- Agregar mazo (max 5)
- Retirar 25% del oro de la run (a oro persistente)
- Elegir traits (heroe + enemigo)
- Victoria al completar la ultima oleada
- Derrota cuando el heroe muere

========================
5. SISTEMA DE OLEADAS Y MAZOS
========================
- Cada oleada corresponde a limpiar todos los enemigos de los mazos activos.
- Un mazo tiene tamano fijo de 20 tipos enemigos por oleada.
- Orden de mazo: ordenado por poder (HP + dano, con nivel), con outlier al final si existe.
- Danger level = suma del poder de todos los enemigos vivos.

========================
6. SISTEMA DE QUESTS (ACTUAL)
========================
- 6 quests seleccionables: Forest, Dark Forest, Frozen Plains, Petrid Swamp, Cursed City, Magma Cavern
- Dificultad 1..6 con escalado:
- Enemigos por oleada +25% por nivel
- Recompensa final +50% por nivel
- La run actual sigue usando el contenido de Forest, pero la seleccion queda registrada

========================
7. SISTEMA DE CARTAS (ACTUAL)
========================
Tipos de carta:
- Heroe (CardDefinition)
- Enemigo (CardDefinition)
- Item (ItemCardDefinition, solo de run)

Nota:
- No hay cartas de accion implementadas.
- El flag de boss existe en definiciones, pero el boss no es garantizado; se usa un outlier por poder.

========================
8. SISTEMA DE COMBATE
========================
- Combate por turnos
- Iniciativa por enemigo vs heroe para decidir el orden
- Si el primero mata, el segundo no ataca
- Armour mitiga dano; lifesteal (flat + %) y thorns se aplican en combate
- Evasion se chequea antes del bloqueo; bloqueo solo si hay escudo
- Regen aplicada por ronda; healing power multiplica curaciones

========================
9. ITEMS Y EQUIPAMIENTO (V1)
========================
- Drops con 50% de chance al morir enemigo
- Mano de items max 6 (FIFO)
- Equipamiento en 7 slots
- Tipos: one_hand, two_hands, helmet, gloves, boots, armour, amulet, ring
- one_hand separa sword y shield para permitir ambos
- Sets tematicos consumen items y dan bonus permanentes; repetibles

========================
10. TRAITS (V1)
========================
- Traits de heroe y enemigo con bonus flat y multiplicadores
- Seleccion en Crossroads (1 trait heroe + 1 trait enemigo)
- Traits se aplican a enemigos existentes y en cola
- Traits se limpian al subir de nivel

========================
11. ECONOMIA (ACTUAL)
========================
- Oro de run se obtiene por enemigos
- Crossroads permite retirar 25% a oro persistente
- Oro persistente se usa en Shop

========================
12. COLECCION Y BOOSTERS
========================
- Binder con PageFlip (prototipo 3D)
- Shop vende packs Forest y Dark Forest
- Abrir pack da 5 cartas de enemigos por bioma (no tutorial)
- Upgrade de carta: gastar 5 copias para +1 nivel (impacta stats en combate)

========================
13. OPCIONES (UI)
========================
- Sliders de volumen Master/Music/SFX
- Opciones de video: modo pantalla, resolucion, VSync y limite de FPS
