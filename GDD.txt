FLIP DECK DUNGEON
GAME DESIGN DOCUMENT (GDD)

========================
1. VISIÓN GENERAL
========================
Flip Deck Dungeon es un roguelike de cartas con combates por turnos donde todas las cartas
son entidades vivas con HP, daño, nivel y traits.

Plataforma: PC (Steam)
Motor: Godot 4.x
Duración de runs: corta / media
Enfoque: decisiones claras, progresión persistente y alta rejugabilidad.
Fantasía secundaria: colección TCG (sobres, rarezas, holos, binder).

========================
2. PILARES DE DISEÑO
========================
- Cartas como entidades vivas
- Una sola fuente de verdad
- Runs cortas pero profundas
- Progresión clara (run vs meta)
- Riesgo vs recompensa explícito
- Coleccionismo TCG sin romper el roguelike
  (pool habilitada, no mazos fijos con copias)

========================
3. CORE FANTASY
========================
El jugador encarna a un héroe representado por una carta.
Los enemigos también son cartas que se enfrentan en combates rápidos y letales.

Cada run progresa mediante:
- Oleadas (escalado automático de poder)
- Encrucijadas (decisiones estructurales)
- Loot táctico (ítems y acciones temporales)

La fantasía es la de profundizar en una dungeon viva,
donde cada decisión vuelve el camino más peligroso y más rentable.

========================
4. LOOP PRINCIPAL
========================
MACRO LOOP:
- Inicio de run
  - Elección de héroe
  - Elección de dungeon
  - Habilitación de pool mínima de cartas
- Oleadas de combate
- Encrucijadas post-oleada
- Boss final (siempre)
- Derrota, escape o victoria
- Retorno al meta (Guild Coins, desbloqueos)

MICRO LOOP:
- Generar encuentro desde los mazos activos
- Combate
- Resolución (muerte, drops, dust de run)
- Limpieza de estado
- Avance de oleada

========================
5. SISTEMA DE OLEADAS
========================
- Una run está compuesta por oleadas.
- Cada oleada corresponde a limpiar un mazo enemigo activo.
- Al completar una oleada:
  - Todas las cartas activas de la run suben +1 nivel.
- El nivel de oleada es temporal y no afecta la colección ni el meta.

========================
6. SISTEMA DE CARTAS
========================
Tipos de cartas:
- Héroe (persistente)
- Enemigo (persistente)
- Ítem (solo de run, equipable)
- Acción (solo de run, consumible)
- Boss (variante especial, generalmente holo)

Atributos de carta:
- ID
- Definición base
- Nivel
- HP actual / máximo (si aplica)
- Daño (si aplica)
- Traits

Nota:
Fuera de la run, las cartas existen como entradas únicas de colección.
Dentro de la run, el sistema puede generar copias temporales desde la pool habilitada.

========================
7. SISTEMA DE COMBATE
========================
Combate por turnos:
- Turno del héroe
- Turno de enemigos (loop multi-enemigo)
- Aplicación de daño
- Chequeo de muerte
- Fin de ronda

Encuentros:
- 1 héroe contra 1 a N enemigos según mazos activos, oleada y amenaza.
- El boss es siempre el encuentro final.

Drops:
Al morir un enemigo puede dropear una carta a la mano:
- Acción (one-shot: heal, cleanse, bomb, etc.)
- Ítem (equipable)

Guardrails:
- Límite de mano/botín
- Reglas claras de descarte y reemplazo

========================
8. ÍTEMS Y SLOTS DE ARMAMENTO
========================
- Los ítems existen solo durante la run.
- Se juegan desde la mano.
- Al equiparse:
  - Ocupan un slot del héroe
  - Reemplazan el ítem anterior del slot (se destruye)

Slots base (ejemplo):
- Arma
- Armadura
- Accesorio

Los ítems pueden:
- Modificar stats
- Agregar traits temporales
- Habilitar ataques a múltiples enemigos (ej: Fireball)

========================
9. SISTEMA DE TRAITS
========================
Traits como modificadores de reglas aplicados mediante hooks:
- Inicio de combate
- Ataque
- Daño
- Muerte

Traits de héroe (run):
- Se ofrecen en Encrucijadas
- Impacto sustancial
- Limitados por run (cap)

No son buffs planos:
modifican el loop (riesgo, drops, combate, economía).

========================
10. ENCRUCIJADAS (POST-OLEADA)
========================
Al finalizar cada oleada se abre una Encrucijada con 4 opciones:

1) Agregar un mazo
   - Se suma un nuevo mazo enemigo
   - Aumenta dificultad y potencial de recompensa
   - Escalable (cap V1: 3–5)

2) Elegir trait de héroe
   - Power spike claro
   - Modifica la run

3) Escapar
   - Finaliza la run
   - El jugador conserva solo el 25% del Dust
   - Se convierte en Guild Coins

4) Continuar
   - No se gasta Dust
   - La run sigue igual

========================
11. DUST DE RUN Y ECONOMÍA
========================
Dust:
- Existe solo dentro de la dungeon
- Moneda temporal de run
- Se obtiene al derrotar enemigos
- Se gasta solo en Encrucijadas

Fin de run:
- Al terminar la run (victoria o escape),
  todo el Dust restante se convierte automáticamente en Guild Coins.
- Fuera de la dungeon no existe Dust.

========================
12. META PROGRESIÓN (GUILD)
========================
Guild Coins:
- Única moneda persistente
- Se usa para:
  - Comprar sobres
  - Desbloquear héroes
  - Upgrades persistentes
  - Contratos

========================
13. COLECCIÓN
========================
- Binder de cartas
- Cartas desbloqueadas + sombras de no desbloqueadas
- Filtros por rareza y bioma

Sobres:
- Pueden otorgar enemigos, héroes, ítems, acciones y bosses (holo).

Duplicados:
- Se desintegran en Guild Coins
- O se invierten para subir el nivel de la carta

Cartas de mayor nivel:
- Son más fuertes
- Generan más valor económico

========================
14. BOSSES, AFFIX Y VARIANTES
========================
- Cada run tiene un boss final
- Prefijos y sufijos escalan por oleada
- Pools e incompatibilidades evitan combinaciones injustas
- Bosses holo son desbloqueos coleccionables

========================
15. PRINCIPIOS FINALES
========================
- Sistemas antes que contenido
- Datos > UI
- Claridad > complejidad
- Toda decisión importante debe ser legible
  (oleada, amenaza, mazos activos, riesgo)
